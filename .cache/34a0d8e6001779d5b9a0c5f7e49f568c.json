{"dependencies":[{"name":"/Users/rihel/Desktop/R/tsconfig.json","includedInParent":true,"mtime":1517672977000},{"name":"./util","loc":{"line":3,"column":21}},{"name":"./core","loc":{"line":4,"column":21}}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar core_1 = require(\"./core\");\nvar Animation = /** @class */ (function () {\n    function Animation(el, json, duration, callback) {\n        this.s = [];\n        // const values:Step[]=[];\n        this.el = el;\n        this.json = json;\n        if (typeof duration === 'function') {\n            this.callback = duration;\n            this.duration = 300;\n        }\n        else {\n            this.callback = callback;\n            this.duration = duration;\n        }\n        this._init();\n        this.start();\n    }\n    Animation.prototype._init = function () {\n        var json = this.json;\n        var keys = Object.keys(json);\n        var _me = this;\n        var _loop_1 = function (key) {\n            var isOpacity = key === 'opacity';\n            var values = [];\n            var start = isOpacity ? parseFloat(this_1._getStyle(key)) : parseInt(this_1._getStyle(key));\n            var end = json[key];\n            values.push(util_1.Util.createStep(start, end));\n            this_1.s.push(new core_1.default({\n                duration: this_1.duration,\n                value: values,\n                render: function () {\n                    var arg = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        arg[_i] = arguments[_i];\n                    }\n                    if (isOpacity) {\n                        _me.el.style[key] = arg[0];\n                    }\n                    else {\n                        _me.el.style[key] = arg[0] + 'px';\n                    }\n                },\n                onEnd: function () {\n                    _me.callback && _me.callback();\n                }\n            }));\n        };\n        var this_1 = this;\n        for (var key in json) {\n            _loop_1(key);\n        }\n    };\n    Animation.prototype.start = function () {\n        this.s.forEach(function (c) {\n            c.play();\n        });\n    };\n    Animation.prototype._getStyle = function (attr) {\n        return getComputedStyle(this.el)[attr];\n    };\n    return Animation;\n}());\nexports.default = Animation;\n","map":{"version":3,"file":"animation.js","sourceRoot":"","sources":["R/src/lib/animation.ts"],"names":[],"mappings":";;AAAA,+BAAoC;AACpC,+BAA0B;AAE1B;IAOC,mBAAY,EAAc,EAAC,IAAqB,EAAC,QAAgB,EAAC,QAAkB;QAF7E,MAAC,GAAQ,EAAE,CAAC;QAGlB,0BAA0B;QAC1B,IAAI,CAAC,EAAE,GAAC,EAAE,CAAC;QACX,IAAI,CAAC,IAAI,GAAC,IAAI,CAAC;QACf,EAAE,CAAA,CAAC,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAA,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAE,QAAoB,CAAC;YACpC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACrB,CAAC;QAAA,IAAI,CAAA,CAAC;YACL,IAAI,CAAC,QAAQ,GAAE,QAAQ,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC1B,CAAC;QACD,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IACO,yBAAK,GAAb;QACC,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAM,GAAG,GAAG,IAAI,CAAC;gCACP,GAAG;YACZ,IAAM,SAAS,GAAS,GAAG,KAAG,SAAS,CAAC;YACxC,IAAM,MAAM,GAAQ,EAAE,CAAC;YACvB,IAAI,KAAK,GAAG,SAAS,CAAC,CAAC,CAAA,UAAU,CAAC,OAAK,SAAS,CAAC,GAAG,CAAC,CAAC,CAAA,CAAC,CAAA,QAAQ,CAAC,OAAK,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACrF,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;YACpB,MAAM,CAAC,IAAI,CAAC,WAAI,CAAC,UAAU,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC,CAAC;YACxC,OAAK,CAAC,CAAC,IAAI,CAAC,IAAI,cAAI,CAAC;gBACpB,QAAQ,EAAC,OAAK,QAAQ;gBACtB,KAAK,EAAC,MAAM;gBACZ,MAAM,EAAN;oBAAO,aAAM;yBAAN,UAAM,EAAN,qBAAM,EAAN,IAAM;wBAAN,wBAAM;;oBACZ,EAAE,CAAA,CAAC,SAAS,CAAC,CAAA,CAAC;wBACb,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1B,CAAC;oBAAA,IAAI,CAAA,CAAC;wBACL,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAC,GAAG,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC;oBAC/B,CAAC;gBACF,CAAC;gBACD,KAAK;oBACJ,GAAG,CAAC,QAAQ,IAAE,GAAG,CAAC,QAAQ,EAAE,CAAC;gBAC9B,CAAC;aACD,CAAC,CAAC,CAAA;QACJ,CAAC;;QApBD,GAAG,CAAA,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC;oBAAZ,GAAG;SAoBZ;IAEF,CAAC;IACM,yBAAK,GAAZ;QACC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,UAAA,CAAC;YACf,CAAC,CAAC,IAAI,EAAE,CAAC;QACV,CAAC,CAAC,CAAA;IACH,CAAC;IACO,6BAAS,GAAjB,UAAkB,IAAW;QAC5B,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAc,CAAC,CAAC;IAClD,CAAC;IACF,gBAAC;AAAD,CAAC,AAxDD,IAwDC","sourcesContent":["import { Step, Util } from \"./util\";\nimport Core from \"./core\";\n\nexport default class Animation{\n\tpublic json:CSSStyleDeclaration;\n\tpublic callback?:()=>void;\n\t// public values:Step[]=[]\n\tpublic el:HTMLElement;\n\tpublic s:Core[]=[];\n\tpublic duration?:number;\n\tconstructor(el:HTMLElement,json:{[index:string]},duration?:number,callback?:()=>void){\n\t\t// const values:Step[]=[];\n\t\tthis.el=el;\n\t\tthis.json=json;\n\t\tif(typeof duration === 'function'){\n\t\t\tthis.callback =duration as ()=>void;\n\t\t\tthis.duration = 300;\n\t\t}else{\n\t\t\tthis.callback =callback;\n\t\t\tthis.duration = duration;\n\t\t}\n\t\tthis._init();\n\t\tthis.start();\n\t}\n\tprivate _init(){\n\t\tconst json = this.json;\n\t\tconst keys = Object.keys(json);\n\t\tconst _me = this;\n\t\tfor(const key in json){\n\t\t\tconst isOpacity:boolean=key==='opacity';\n\t\t\tconst values:Step[]=[];\n\t\t\tlet start = isOpacity ?parseFloat(this._getStyle(key)):parseInt(this._getStyle(key));\n\t\t\tlet end = json[key];\n\t\t\tvalues.push(Util.createStep(start,end));\n\t\t\tthis.s.push(new Core({\n\t\t\t\tduration:this.duration,\n\t\t\t\tvalue:values,\n\t\t\t\trender(...arg):void{\n\t\t\t\t\tif(isOpacity){\n\t\t\t\t\t\t_me.el.style[key]=arg[0];\n\t\t\t\t\t}else{\n\t\t\t\t\t\t_me.el.style[key]=arg[0]+'px';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonEnd(){\n\t\t\t\t\t_me.callback&&_me.callback();\n\t\t\t\t}\n\t\t\t}))\n\t\t}\n\n\t}\n\tpublic start(){\n\t\tthis.s.forEach(c=>{\n\t\t\tc.play();\n\t\t})\n\t}\n\tprivate _getStyle(attr:string):string{\n\t\treturn getComputedStyle(this.el)[attr as string];\n\t}\n}"]}},"hash":"cdb3ad0270c4158fea6bb6bd72efdb1e","cacheData":{"env":{}}}