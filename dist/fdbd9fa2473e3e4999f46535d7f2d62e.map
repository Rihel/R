{"version":3,"sources":["R/src/lib/util.ts","R/src/lib/core.ts","R/src/lib/animation.ts","R/src/lib/index.ts","R/src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;IAGC,cAAY,KAAa,EAAE,GAAW;QACrC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IAChB,CAAC;IACF,WAAC;AAAD,CAPA,AAOC,IAAA;AAPY,oBAAI;AAQjB;IAAA;IAyBA,CAAC;IAxBc,aAAQ,GAAtB,UAAuB,EAAc;QACpC,IAAM,GAAG,GAAG,MAAM,CAAC,qBAAqB;YACvC,MAAM,CAAC,2BAA2B;YAClC,UAAU,QAAoB;gBAC7B,MAAM,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,GAAG,EAAE,CAAC,CAAA;YACvC,CAAC,CAAA;QACF,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAChB,CAAC;IACa,WAAM,GAApB,UAAqB,OAAe;QACnC,IAAM,QAAQ,GAAG,MAAM,CAAC,oBAAoB;YAC3C,MAAM,CAAC,0BAA0B;YACjC,YAAY,CAAC;QACd,QAAQ,CAAC,OAAO,CAAC,CAAC;IACnB,CAAC;IACa,eAAU,GAAxB,UAAyB,KAAY,EAAC,GAAU;QAC/C,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;IAC5B,CAAC;IACa,UAAK,GAEjB;QACD,MAAM,EAAN,UAAO,WAAkB,EAAC,QAAe,EAAC,SAAgB,EAAC,QAAe;YACzE,MAAM,CAAC,SAAS,GAAG,WAAW,GAAG,QAAQ,GAAE,QAAQ,CAAC;QACrD,CAAC;KACD,CAAA;IACF,WAAC;CAzBD,AAyBC,IAAA;AAzBa,oBAAI;;;;;ACTlB,+BAAiC;AASjC,mBAAmB;AACnB,mFAAmF;AACnF,IAAI;AAEJ;IAQC,cAAY,EAML;YALN,gBAAa,EAAb,oCAAa,EACb,kBAAM,EACN,gBAAK,EACL,aAAc,EAAd,qCAAc,EACd,gBAAK;QAXE,cAAS,GAAQ,CAAC,CAAC;QAKpB,UAAK,GAAQ,MAAM,CAAC;QAQ1B,IAAI,CAAC,QAAQ,GAAC,QAAQ,CAAC;QACvB,IAAI,CAAC,MAAM,GAAC,KAAK,CAAC;QAClB,IAAI,CAAC,KAAK,GAAC,KAAK,CAAC;QACjB,IAAI,CAAC,MAAM,GAAC,MAAM,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IAEpB,CAAC;IACO,oBAAK,GAAb;QACE,IAAM,CAAC,GAAQ,IAAI,CAAC,GAAG,EAAE,GAAC,IAAI,CAAC,SAAS,CAAC;QACzC,IAAM,CAAC,GAAU,IAAI,CAAC,QAAkB,CAAC;QACzC,IAAM,MAAM,GAAG,WAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtC,EAAE,CAAA,CAAC,CAAC,IAAE,CAAC,IAAI,IAAI,CAAC,KAAK,KAAG,KAAK,CAAC,CAAA,CAAC;YAC9B,IAAI,CAAC,GAAG,EAAE,CAAC;QACZ,CAAC;QAAA,IAAI,CAAA,CAAC;YACL,IAAI,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,EAAC,MAAM,CAAC,CAAC;YAC3B,WAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtC,CAAC;IAEH,CAAC;IAEO,kBAAG,GAAX;QACC,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;IAC5B,CAAC;IAEO,8BAAe,GAAvB;QACC,IAAM,CAAC,GAAQ,IAAI,CAAC,GAAG,EAAE,GAAC,IAAI,CAAC,SAAS,CAAC;QACzC,IAAM,CAAC,GAAU,IAAI,CAAC,QAAkB,CAAC;QACzC,IAAM,MAAM,GAAG,WAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,EAAC,MAAM,CAAC,CAAC;QAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACpB,CAAC;IAEO,wBAAS,GAAjB,UACC,IAAW,EACX,QAAe,EACf,QAIyB;QAGxB,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAM,OAAO,GAAU,MAAM,CAAC,GAAG,CAAC,UAAA,KAAK;YACtC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAC,KAAK,CAAC,KAAK,EAAC,KAAK,CAAC,GAAG,GAAC,KAAK,CAAC,KAAK,EAAC,QAAQ,CAAC,CAAC;QAClE,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,MAAM,OAAX,IAAI,EAAW,OAAO,EAAE;IAE1B,CAAC;IACO,oBAAK,GAAb;QACC,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAC,MAAM,CAAC;QAClB,WAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACtC,CAAC;IACD,mBAAI,GAAJ;QACC,IAAI,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IACF,WAAC;AAAD,CA3EA,AA2EC,IAAA;;;;;;ACxFD,+BAAoC;AACpC,+BAA0B;AAE1B;IAOC,mBAAY,EAAc,EAAC,IAAqB,EAAC,QAAgB,EAAC,QAAkB;QAF7E,MAAC,GAAQ,EAAE,CAAC;QAGlB,0BAA0B;QAC1B,IAAI,CAAC,EAAE,GAAC,EAAE,CAAC;QACX,IAAI,CAAC,IAAI,GAAC,IAAI,CAAC;QACf,EAAE,CAAA,CAAC,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAA,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAE,QAAoB,CAAC;YACpC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACrB,CAAC;QAAA,IAAI,CAAA,CAAC;YACL,IAAI,CAAC,QAAQ,GAAE,QAAQ,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAC1B,CAAC;QACD,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IACO,yBAAK,GAAb;QACC,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAM,GAAG,GAAG,IAAI,CAAC;gCACP,GAAG;YACZ,IAAM,SAAS,GAAS,GAAG,KAAG,SAAS,CAAC;YACxC,IAAM,MAAM,GAAQ,EAAE,CAAC;YACvB,IAAI,KAAK,GAAG,SAAS,CAAC,CAAC,CAAA,UAAU,CAAC,OAAK,SAAS,CAAC,GAAG,CAAC,CAAC,CAAA,CAAC,CAAA,QAAQ,CAAC,OAAK,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACrF,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;YACpB,MAAM,CAAC,IAAI,CAAC,WAAI,CAAC,UAAU,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC,CAAC;YACxC,OAAK,CAAC,CAAC,IAAI,CAAC,IAAI,cAAI,CAAC;gBACpB,QAAQ,EAAC,OAAK,QAAQ;gBACtB,KAAK,EAAC,MAAM;gBACZ,MAAM,EAAN;oBAAO,aAAM;yBAAN,UAAM,EAAN,qBAAM,EAAN,IAAM;wBAAN,wBAAM;;oBACZ,EAAE,CAAA,CAAC,SAAS,CAAC,CAAA,CAAC;wBACb,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC1B,CAAC;oBAAA,IAAI,CAAA,CAAC;wBACL,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,GAAC,GAAG,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC;oBAC/B,CAAC;gBACF,CAAC;gBACD,KAAK;oBACJ,GAAG,CAAC,QAAQ,IAAE,GAAG,CAAC,QAAQ,EAAE,CAAC;gBAC9B,CAAC;aACD,CAAC,CAAC,CAAA;QACJ,CAAC;;QApBD,GAAG,CAAA,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC;oBAAZ,GAAG;SAoBZ;IAEF,CAAC;IACM,yBAAK,GAAZ;QACC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,UAAA,CAAC;YACf,CAAC,CAAC,IAAI,EAAE,CAAC;QACV,CAAC,CAAC,CAAA;IACH,CAAC;IACO,6BAAS,GAAjB,UAAkB,IAAW;QAC5B,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAc,CAAC,CAAC;IAClD,CAAC;IACF,gBAAC;AAAD,CAxDA,AAwDC,IAAA;;;;;;AC3DD,yCAAoC;AAEpC;IAAA;IAIA,CAAC;IAHc,SAAO,GAArB,UAAsB,EAAc,EAAC,IAAW,EAAC,QAAgB,EAAC,QAAkB;QACnF,MAAM,CAAC,IAAI,mBAAS,CAAC,EAAE,EAAC,IAAI,EAAC,QAAQ,EAAC,QAAQ,CAAC,CAAC;IACjD,CAAC;IACF,QAAC;AAAD,CAJA,AAIC,IAAA;;;;;;ACND,qCAA4B;AAG5B,eAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,EAAC;IACxC,KAAK,EAAC,GAAG;CACT,CAAC,CAAA","file":"fdbd9fa2473e3e4999f46535d7f2d62e.map","sourcesContent":["\nexport class Step {\n\tpublic start: number;\n\tpublic end: number;\n\tconstructor(start: number, end: number) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t}\n}\nexport  class Util {\n\tpublic static reqAnimF(fn: () => void): number {\n\t\tconst req = window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\tfunction (callback: () => void): number {\n\t\t\t\treturn setTimeout(callback, 1000 / 60)\n\t\t\t}\n\t\treturn req(fn);\n\t}\n\tpublic static cancel(timerId: number): void {\n\t\tconst cancelFn = window.cancelAnimationFrame ||\n\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\tclearTimeout;\n\t\tcancelFn(timerId);\n\t}\n\tpublic static createStep(start:number,end:number):Step{\n\t\treturn new Step(start,end);\n\t}\n\tpublic static Tween:{\n\t\t[index:string]\n\t}={\n\t\tlinear(currentTime:number,beginVal:number,changeVal:number,duration:number):number{\n\t\t\treturn changeVal * currentTime / duration +beginVal;\n\t\t}\n\t}\n}","import {Util,Step} from \"./util\";\ninterface ICore{\n\tduration?:number;\n\trender(...args:number[]):void;\n\tvalue:Step[];\n\ttimFn?:string;\n\tonEnd?:()=>void;\n}\n\n// interface Tween{\n// \tfn(currentTime:number,beginVal:number,changeVal:number,duration:number):number;\n// }\n\nexport default class Core{\n\tprivate duration?:number;\n\tprivate startTime:number=0;\n\tprivate render:(...args:number[])=>void;\n\tprivate values:Step[];\n\tprivate timFn:string;\n\tprivate onEnd:()=>void;\n\tpublic state:string='init';\n\tconstructor({\n\t\tduration=1000,\n\t\trender,\n\t\tvalue,\n\t\ttimFn='linear',\n\t\tonEnd\n\t}:ICore){\n\t\tthis.duration=duration;\n\t\tthis.values=value;\t\n\t\tthis.timFn=timFn;\n\t\tthis.render=render;\n\t\tthis.onEnd = onEnd;\n\n\t}\n\tprivate _loop(){\n\t\t\tconst t:number=Date.now()-this.startTime;\n\t\t\tconst d:number = this.duration as number;\n\t\t\tconst timeFn = Util.Tween[this.timFn];\n\t\t\t\n\t\t\tif(t>=d\t|| this.state==='end'){\n\t\t\t\tthis.end();\n\t\t\t}else{\n\t\t\t\tthis._renderFn(t,d,timeFn);\n\t\t\t\tUtil.reqAnimF(this._loop.bind(this));\n\t\t\t}\n\n\t}\n\n\tprivate end(){\n\t\tthis._renderEndState();\n\t\tthis.onEnd && this.onEnd();\n\t}\n\n\tprivate _renderEndState(){\n\t\tconst t:number=Date.now()-this.startTime;\n\t\tconst d:number = this.duration as number;\n\t\tconst timeFn = Util.Tween[this.timFn];\n\t\tthis._renderFn(d,d,timeFn);\n\t\tthis.state = 'end';\n\t}\n\n\tprivate _renderFn(\n\t\ttime:number,\n\t\tduration:number,\n\t\ttimingFn:(\n\t\t\tcurrentTime:number,\n\t\t\tbeginVal:number,\n\t\t\tchangeVal:number,\n\t\t\tduration:number)=>number\n\t\t){\n\n\t\t\tconst values = this.values;\n\t\t\tconst doneVal:number[]=values.map(value=>{\n\t\t\t\treturn timingFn(time,value.start,value.end-value.start,duration);\n\t\t\t})\n\n\t\t\tthis.render(...doneVal);\n\t\t\n\t}\n\tprivate _play():void{\n\t\tthis.startTime=Date.now();\n\t\tthis.state='play';\n\t\tUtil.reqAnimF(this._loop.bind(this));\n\t}\n\tplay(){\n\t\tthis._play();\n\t}\n}","import { Step, Util } from \"./util\";\nimport Core from \"./core\";\n\nexport default class Animation{\n\tpublic json:CSSStyleDeclaration;\n\tpublic callback?:()=>void;\n\t// public values:Step[]=[]\n\tpublic el:HTMLElement;\n\tpublic s:Core[]=[];\n\tpublic duration?:number;\n\tconstructor(el:HTMLElement,json:{[index:string]},duration?:number,callback?:()=>void){\n\t\t// const values:Step[]=[];\n\t\tthis.el=el;\n\t\tthis.json=json;\n\t\tif(typeof duration === 'function'){\n\t\t\tthis.callback =duration as ()=>void;\n\t\t\tthis.duration = 300;\n\t\t}else{\n\t\t\tthis.callback =callback;\n\t\t\tthis.duration = duration;\n\t\t}\n\t\tthis._init();\n\t\tthis.start();\n\t}\n\tprivate _init(){\n\t\tconst json = this.json;\n\t\tconst keys = Object.keys(json);\n\t\tconst _me = this;\n\t\tfor(const key in json){\n\t\t\tconst isOpacity:boolean=key==='opacity';\n\t\t\tconst values:Step[]=[];\n\t\t\tlet start = isOpacity ?parseFloat(this._getStyle(key)):parseInt(this._getStyle(key));\n\t\t\tlet end = json[key];\n\t\t\tvalues.push(Util.createStep(start,end));\n\t\t\tthis.s.push(new Core({\n\t\t\t\tduration:this.duration,\n\t\t\t\tvalue:values,\n\t\t\t\trender(...arg):void{\n\t\t\t\t\tif(isOpacity){\n\t\t\t\t\t\t_me.el.style[key]=arg[0];\n\t\t\t\t\t}else{\n\t\t\t\t\t\t_me.el.style[key]=arg[0]+'px';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonEnd(){\n\t\t\t\t\t_me.callback&&_me.callback();\n\t\t\t\t}\n\t\t\t}))\n\t\t}\n\n\t}\n\tpublic start(){\n\t\tthis.s.forEach(c=>{\n\t\t\tc.play();\n\t\t})\n\t}\n\tprivate _getStyle(attr:string):string{\n\t\treturn getComputedStyle(this.el)[attr as string];\n\t}\n}","import Animation from \"./animation\";\n\nexport default class R{\n\tpublic static animate(el:HTMLElement,json:object,duration?:number,callback?:()=>void){\n\t\treturn new Animation(el,json,duration,callback);\n\t}\n}","import R from \"./lib/index\";\n\n\nR.animate(document.querySelector('.box'),{\n\twidth:300,\n})"]}